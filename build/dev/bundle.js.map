{"version":3,"file":"bundle.js","sources":["../../src/scripts/ControllerBot.js","../../src/scripts/WorkerBot.js","../../src/scripts/sampleBotnet.js","../../src/scripts/index.js"],"sourcesContent":["/*eslint no-unused-vars:0*/\r\nexport default class ControllerBot {\r\n\tconstructor(locations) {\r\n\t\tthis.storage = \"\";\r\n\t}\r\n\tsendMessage(messages, index) {\r\n\t\treturn \"\";\r\n\t}\r\n}\r\n","/*eslint no-unused-vars:0*/\r\nclass WorkerBot {\r\n\tconstructor(index) {\r\n\t\tthis.index = index;\r\n\t}\r\n\tperformAction(message) {}\r\n\tsendMessage(x, y, surroundings) {}\r\n}\r\n/*let oldHasInstance = WorkerBot[Symbol.hasInstance].bind({});\r\nObject.defineProperty(WorkerBot, Symbol.hasInstance, {\r\n\tvalue: function(instance) {\r\n\t\treturn instance instanceof WorkerBotWrapper || oldHasInstance;\r\n\t}\r\n});*/\r\nexport default WorkerBot;\r\n","/* eslint constructor-super:0,no-this-before-super:0,no-unused-vars:0*/\r\nimport ControllerBot from \"./ControllerBot.js\";\r\nimport WorkerBot from \"./WorkerBot.js\";\r\n\r\nexport default function sampleBotnet() {\r\n\tclass SampleControllerBot extends ControllerBot {\r\n\t\tconstructor(locations) {\r\n\t\t\tsuper(locations);\r\n\t\t\tthis.storage = \"\";\r\n\t\t}\r\n\t\tsendMessage(messages, index) {\r\n\t\t\tlet surrondings = messages.find(message => message[0] === index)[1];\r\n\t\t\tlet otherBot = surrondings.findIndex(\r\n\t\t\t\t(square, i) =>\r\n\t\t\t\t\tsquare === \"B\" && [6, 7, 8, 11, 13, 16, 17, 18].includes(i)\r\n\t\t\t);\r\n\t\t\tif (otherBot !== -1) {\r\n\t\t\t\treturn [\"kill\", otherBot];\r\n\t\t\t}\r\n\t\t\tlet coin = surrondings.findIndex(\r\n\t\t\t\t(square, i) =>\r\n\t\t\t\t\tsquare === \"C\" && [6, 7, 8, 11, 13, 16, 17, 18].includes(i)\r\n\t\t\t);\r\n\t\t\tif (coin !== -1) {\r\n\t\t\t\treturn [\"move\", coin];\r\n\t\t\t}\r\n\t\t\tlet validMoves = [6, 7, 8, 11, 13, 16, 17, 18].filter(\r\n\t\t\t\tx => surrondings[x] === \"\"\r\n\t\t\t);\r\n\t\t\treturn [\r\n\t\t\t\t\"move\",\r\n\t\t\t\tvalidMoves[Math.floor(Math.random() * validMoves.length)]\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tclass SampleWorkerBot extends WorkerBot {\r\n\t\tperformAction(message) {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tsendMessage(x, y, surroundings) {\r\n\t\t\treturn [this.index, surroundings];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tname: \"SampleBotnet\",\r\n\t\tcolor: \"red\",\r\n\t\tcontrollerBot: SampleControllerBot,\r\n\t\tworkerBot: SampleWorkerBot\r\n\t};\r\n}\r\n","import sampleBotnet from \"./sampleBotnet.js\";\r\nlet canvas = document.getElementById(\"grid\");\r\nconst CANVAS_SIZE = canvas.width;\r\nconst SQUARE_SIZE = CANVAS_SIZE / 100;\r\nlet context = canvas.getContext(\"2d\");\r\nlet gridlines = true;\r\nlet botClasses = [sampleBotnet.toString()];\r\nlet rounds = 1000;\r\nlet counter = document.getElementById(\"round-counter\");\r\nlet worker = undefined;\r\nfunction displayGrid(grid) {\r\n\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\tcounter.textContent = parseInt(counter.textContent, 10) + 1;\r\n\tfor (let i = 0; i < 100; i++) {\r\n\t\tfor (let j = 0; j < 100; j++) {\r\n\t\t\tlet square = grid[i][j];\r\n\t\t\tlet dimensions = [\r\n\t\t\t\ti * SQUARE_SIZE,\r\n\t\t\t\tj * SQUARE_SIZE,\r\n\t\t\t\tSQUARE_SIZE,\r\n\t\t\t\tSQUARE_SIZE\r\n\t\t\t];\r\n\t\t\tif (square !== \"\") {\r\n\t\t\t\tif (square === \"C\") {\r\n\t\t\t\t\t//coin\r\n\t\t\t\t\tcontext.fillStyle = \"rgb(255,255,0)\";\r\n\t\t\t\t} else if (square[0] === \"B\") {\r\n\t\t\t\t\tcontext.fillStyle = square[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(`Invalid Square:${square}`);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.fillRect(...dimensions);\r\n\t\t\t} else if (gridlines) {\r\n\t\t\t\tcontext.lineWidth = 0.3;\r\n\t\t\t\tcontext.strokeStyle = \"rgb(20,20,20)\";\r\n\t\t\t\tcontext.strokeRect(...dimensions);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nfunction displayResults(results) {\r\n\tlet rankings = document.getElementById(\"rankings\");\r\n\trankings.innerHTML = \"\";\r\n\tfor (let row of results) {\r\n\t\tlet ranking = document.createElement(\"li\");\r\n\t\tranking.append(`${row[0]}: ${row[1]} Gold`);\r\n\t\trankings.append(ranking);\r\n\t}\r\n\tconsole.log(results);\r\n}\r\nfunction endWorker() {\r\n\tworker.terminate();\r\n\tdelete window.worker;\r\n}\r\nif (window.Worker) {\r\n\tdocument\r\n\t\t.getElementById(\"run-game\")\r\n\t\t.addEventListener(\"click\", function(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tcounter.textContent = \"0\";\r\n\t\t\tlet displayInterval = parseInt(\r\n\t\t\t\tdocument.getElementById(\"display-interval\").value,\r\n\t\t\t\t10\r\n\t\t\t);\r\n\t\t\tlet testBotnet = document.getElementById(\"test-botnet\").value;\r\n\t\t\tlet allBotClasses;\r\n\t\t\tif (testBotnet.length > 0) {\r\n\t\t\t\tallBotClasses = botClasses.concat(testBotnet);\r\n\t\t\t} else {\r\n\t\t\t\tallBotClasses = botClasses;\r\n\t\t\t}\r\n\t\t\tif (worker) {\r\n\t\t\t\tendWorker();\r\n\t\t\t}\r\n\t\t\tworker = new Worker(\"./worker.js\");\r\n\t\t\tworker.postMessage({\r\n\t\t\t\tbotClasses: allBotClasses,\r\n\t\t\t\trounds,\r\n\t\t\t\tdisplayInterval\r\n\t\t\t});\r\n\t\t\tworker.onmessage = function(event) {\r\n\t\t\t\tif (event.data[0] === \"update\") {\r\n\t\t\t\t\tlet grid = event.data[1];\r\n\t\t\t\t\tdisplayGrid(grid);\r\n\t\t\t\t} else if (event.data[0] === \"end\") {\r\n\t\t\t\t\tdisplayResults(event.data[1]);\r\n\t\t\t\t\tendWorker();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\tdocument.getElementById(\"stop-game\").addEventListener(\"click\", endWorker);\r\n} else {\r\n\tconsole.error(\"Worker API Unsupported. Please use another browser\");\r\n}\r\n"],"names":["ControllerBot","constructor","locations","storage","sendMessage","messages","index","WorkerBot","performAction","message","x","y","surroundings","sampleBotnet","SampleControllerBot","surrondings","find","otherBot","findIndex","square","i","includes","coin","validMoves","filter","Math","floor","random","length","SampleWorkerBot","name","color","controllerBot","workerBot","canvas","document","getElementById","CANVAS_SIZE","width","SQUARE_SIZE","context","getContext","botClasses","toString","rounds","counter","worker","undefined","displayGrid","grid","clearRect","height","textContent","parseInt","j","dimensions","fillStyle","console","error","fillRect","lineWidth","strokeStyle","strokeRect","displayResults","results","rankings","innerHTML","row","ranking","createElement","append","log","endWorker","terminate","window","Worker","addEventListener","event","preventDefault","displayInterval","value","testBotnet","allBotClasses","concat","postMessage","onmessage","data"],"mappings":"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"}