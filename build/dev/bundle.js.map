{"version":3,"file":"bundle.js","sources":["../../src/scripts/WorkerBotWrapper.js","../../src/scripts/ControllerBot.js","../../src/scripts/WorkerBot.js","../../src/scripts/sampleBotnet.js","../../src/scripts/utils.js","../../src/scripts/index.js"],"sourcesContent":["/*eslint no-unused-vars:0*/\r\nexport default class WorkerBotWrapper {\r\n\tconstructor(x, y, index, name, botClass) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.gold = 0;\r\n\t\tthis.bot = new botClass(x, y, index);\r\n\t\tthis.name = `${name}#${index}`;\r\n\t\tthis.stunnedRound = -1;\r\n\t}\r\n\tperformAction(message) {\r\n\t\treturn this.bot.performAction(message);\r\n\t}\r\n\tsendMessage(surrondings) {\r\n\t\treturn this.bot.sendMessage(surrondings);\r\n\t}\r\n}\r\n","/*eslint no-unused-vars:0*/\r\nexport default class ControllerBot {\r\n\tconstructor(locations) {\r\n\t\tthis.storage = \"\";\r\n\t}\r\n\tsendMessage(messages, index) {\r\n\t\treturn [];\r\n\t}\r\n}\r\n","import WorkerBotWrapper from \"./WorkerBotWrapper.js\";\r\n\r\n/*eslint no-unused-vars:0*/\r\nclass WorkerBot {\r\n\tconstructor(index) {\r\n\t\tthis.index = index;\r\n\t\tthis.color = \"\";\r\n\t}\r\n\tperformAction(message) {}\r\n\tsendMessage(x, y, surrondings) {}\r\n}\r\n/*let oldHasInstance = WorkerBot[Symbol.hasInstance].bind({});\r\nObject.defineProperty(WorkerBot, Symbol.hasInstance, {\r\n\tvalue: function(instance) {\r\n\t\treturn instance instanceof WorkerBotWrapper || oldHasInstance;\r\n\t}\r\n});*/\r\nexport default WorkerBot;\r\n","/* eslint constructor-super:0,no-this-before-super:0,no-unused-vars:0*/\r\nimport ControllerBot from \"./ControllerBot.js\";\r\nimport WorkerBot from \"./WorkerBot.js\";\r\n\r\nexport default function sampleBotnet() {\r\n\tclass SampleControllerBot extends ControllerBot {\r\n\t\tconstructor(locations) {\r\n\t\t\tsuper(locations);\r\n\t\t\tthis.name = \"\";\r\n\t\t\tthis.storage = \"\";\r\n\t\t}\r\n\t\tsendMessage(messages, index) {\r\n\t\t\tconsole.log(messages);\r\n\t\t\tlet surrondings = messages.find(message => message[0] === index)[1];\r\n\t\t\tlet otherBot = surrondings.find(square => square === \"B\");\r\n\t\t\tif (otherBot !== undefined) {\r\n\t\t\t\treturn [\"attack\", otherBot];\r\n\t\t\t}\r\n\t\t\tlet coin = surrondings.find(square => square === \"C\");\r\n\t\t\treturn [\"move\", coin];\r\n\t\t}\r\n\t}\r\n\tclass SampleWorkerBot extends WorkerBot {\r\n\t\tconstructor(index) {\r\n\t\t\tsuper(index);\r\n\t\t\tthis.color = \"red\";\r\n\t\t}\r\n\t\tperformAction(message) {\r\n\t\t\tif (message[0] === \"attack\") {\r\n\t\t\t\treturn [\"attack\", message[0]];\r\n\t\t\t}\r\n\t\t\tif (message[1] !== undefined) {\r\n\t\t\t\treturn [\"move\", message];\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsendMessage(x, y, surrondings) {\r\n\t\t\treturn [this.index, surrondings];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tname: \"SampleBotnet\",\r\n\t\tcontrollerBot: SampleControllerBot,\r\n\t\tworkerBot: SampleWorkerBot\r\n\t};\r\n}\r\n","//from https://stackoverflow.com/a/1527820/\r\nlet randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\r\n//from https://stackoverflow.com/a/12646864/7941251\r\nfunction shuffle(array) {\r\n\t//in place\r\n\tarray;\r\n\tfor (var i = array.length - 1; i > 0; i--) {\r\n\t\tvar j = Math.floor(Math.random() * (i + 1));\r\n\t\tvar temp = array[i];\r\n\t\tarray[i] = array[j];\r\n\t\tarray[j] = temp;\r\n\t}\r\n}\r\n//adapted from https://davidwalsh.name/essential-javascript-functions\r\nfunction debounce(func, wait, immediate) {\r\n\tlet timeout;\r\n\treturn function() {\r\n\t\tlet context = this,\r\n\t\t\targs = arguments;\r\n\t\tlet later = function() {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) {\r\n\t\t\t\tfunc.apply(context, args);\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) {\r\n\t\t\tfunc.apply(context, args);\r\n\t\t}\r\n\t};\r\n}\r\nexport { randInt, shuffle, debounce };\r\n","import WorkerBotWrapper from \"./WorkerBotWrapper.js\";\r\nimport sampleBotnet from \"./sampleBotnet.js\";\r\nimport { debounce } from \"./utils.js\";\r\nlet canvas = document.getElementById(\"grid\");\r\nconst CANVAS_SIZE = canvas.width;\r\nconst SQUARE_SIZE = CANVAS_SIZE / 100;\r\nlet context = canvas.getContext(\"2d\");\r\nlet gridlines = true;\r\nlet botClasses = [sampleBotnet.toString()];\r\nlet displayInterval = 100;\r\nif (window.Worker) {\r\n\tlet worker = new Worker(\"./worker.js\");\r\n\tworker.postMessage(botClasses);\r\n\tworker.onmessage = debounce(function(grid) {\r\n\t\tconsole.log(grid);\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tfor (let j = 0; j < 100; j++) {\r\n\t\t\t\tlet square = grid[i][j];\r\n\t\t\t\tlet dimensions = [\r\n\t\t\t\t\ti * SQUARE_SIZE,\r\n\t\t\t\t\tj * SQUARE_SIZE,\r\n\t\t\t\t\tSQUARE_SIZE,\r\n\t\t\t\t\tSQUARE_SIZE\r\n\t\t\t\t];\r\n\t\t\t\tif (square !== undefined) {\r\n\t\t\t\t\tif (square === \"C\") {\r\n\t\t\t\t\t\t//coin\r\n\t\t\t\t\t\tcontext.fillstyle = \"rgb(255,255,0)\";\r\n\t\t\t\t\t} else if (square instanceof WorkerBotWrapper) {\r\n\t\t\t\t\t\tcontext.fillstyle = square.color;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.fillRect(...dimensions);\r\n\t\t\t\t} else if (gridlines) {\r\n\t\t\t\t\tcontext.lineWidth = 0.3;\r\n\t\t\t\t\tcontext.strokestyle = \"rgb(20,20,20)\";\r\n\t\t\t\t\tcontext.strokeRect(...dimensions);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, displayInterval);\r\n} else {\r\n\tconsole.error(\"Worker API Unsupported. Please use another browser\");\r\n}\r\n"],"names":["WorkerBotWrapper","constructor","x","y","index","name","botClass","gold","bot","stunnedRound","performAction","message","sendMessage","surrondings","ControllerBot","locations","storage","messages","WorkerBot","color","sampleBotnet","SampleControllerBot","console","log","find","otherBot","square","undefined","coin","SampleWorkerBot","controllerBot","workerBot","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","canvas","document","getElementById","CANVAS_SIZE","width","SQUARE_SIZE","getContext","botClasses","toString","displayInterval","window","Worker","worker","postMessage","onmessage","grid","i","j","dimensions","fillstyle","fillRect","lineWidth","strokestyle","strokeRect","error"],"mappings":"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"}