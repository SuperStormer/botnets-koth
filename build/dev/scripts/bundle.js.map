{"version":3,"file":"bundle.js","sources":["../../../src/scripts/utils.js","../../../src/scripts/WorkerBot.js","../../../src/scripts/ControllerBot.js","../../../src/scripts/Controller.js","../../../src/scripts/index.js"],"sourcesContent":["\r\n//from https://stackoverflow.com/a/1527820/\r\nlet randInt = (min,max)=>Math.floor(Math.random() * (max - min + 1)) + min\r\nfunction shuffle(array){//in place\r\n\tarray\r\n    for (var i = array.length - 1; i > 0; i--) {\r\n        var j = Math.floor(Math.random() * (i + 1));\r\n        var temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n    }\r\n}\r\nexport {randInt,shuffle}","/*eslint no-unused-vars:0*/\r\nexport default class WorkerBot{\r\n    constructor(x,y){\r\n\t\tthis.x=x\r\n\t\tthis.y=y\r\n\t\tthis.initialize(x,y)\r\n\t}\r\n\tinitialize(x,y){\r\n\t\tthis.storageSize=0\r\n\t\tthis.storage=\"\"\r\n\t\tthis.color=\"\"\r\n\t}\r\n    performAction(surrondings,message){}\r\n    sendMessage(surrondings){}\r\n}\r\n","/*eslint no-unused-vars:0*/\r\nexport default class ControllerBot {\r\n\tconstructor(locations) {\r\n\t\tthis.storage = \"\"\r\n\t}\r\n\tsendMessage(messages,index) {\r\n\t\treturn []\r\n\t}\r\n}","import { randInt, shuffle } from \"./utils.js\"\r\nimport WorkerBot from \"./WorkerBot.js\"\r\nimport ControllerBot from \"./ControllerBot.js\"\r\nconst STARTING_COINS = 100\r\nconst COINS_PER_ROUND = 10\r\nconst NUM_WORKER_BOTS = 20\r\nexport default class Controller {\r\n\tconstructor(botClasses, displayFunc) {\r\n\t\tthis.displayFunc = displayFunc\r\n\t\tthis.botClasses = botClasses.filter(botClasses2=>\r\n\t\t\tbotClasses2.controllerBot.prototype instanceof ControllerBot && \r\n\t\t\tbotClasses2.workerBot.prototype instanceof WorkerBot)\r\n\t}\r\n\trunGame() {\r\n\t\tthis.initGrid()\r\n\t\tshuffle(this.botnets)\r\n\t\tthis.botnets = this.botnets.slice(0, 15)\r\n\t\tfor (let i = 0; i < 1000; i++) {\r\n\t\t\tthis.runRound(i)\r\n\t\t}\r\n\t}\r\n\trunRound(round) {\r\n\t\tconsole.log(round)\r\n\t\tfor (let i = 0; i < COINS_PER_ROUND; i++) {\r\n\t\t\tthis.generateCoin()\r\n\t\t}\r\n\t\tshuffle(this.botnets)\r\n\t\tlet workerBots = this.botnets.flatMap(botnet => botnet.workerBots)\r\n\t\tfor (let botnet of this.botnets) {\r\n\t\t\tfor (let i = 0; i < botnet.workerBots.length; i++) {\r\n\t\t\t\tlet workerBot = botnet.workerBots[i]\r\n\t\t\t\tlet allMessages = workerBots.map(workerBot2 => workerBot2.sendMessage(this.getSurrondings(workerBot2.x, workerBot2.y)))\r\n\t\t\t\tlet controllerBotMessage = botnet.controllerBot.sendMessage(allMessages, i)\r\n\t\t\t\tlet action = workerBot.performAction(controllerBotMessage)\r\n\t\t\t\tthis.handleAction(action)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tinitGrid() {\r\n\t\tthis.grid = new Array(100);//indexed [y,x]\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tthis.grid[i] = new Array(100)\r\n\t\t}\r\n\t\tthis.botnets = this.botClasses.map((botClasses2) => {\r\n\t\t\tlet workerBots = []\r\n\t\t\tfor (let i = 0; i < NUM_WORKER_BOTS; i++) {\r\n\t\t\t\tworkerBots.push(this.generateWorkerBot(botClasses2.workerBot))\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tcontrollerBot: new botClasses2.controllerBot(workerBots.map(bot => [bot.x, bot.y])),\r\n\t\t\t\tworkerBots: workerBots\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (let i = 0; i < STARTING_COINS; i++) {\r\n\t\t\tthis.generateCoin()\r\n\t\t}\r\n\t}\r\n\thandleAction(action) {//returns true if action was valid\r\n\t\tswitch (action[0]) {\r\n\t\t\tcase \"kill\":\r\n\t\t\t\tif ([6, 7, 8, 11, 12, 13, 16, 17, 18].includes(action[1])) {//is valid attack spot\r\n\t\t\t\t\tlet coords = this.surrondingsIndexToCoords(action[1])\r\n\t\t\t\t\tlet square = this.grid[coords[1]][coords[0]]\r\n\t\t\t\t\tif (square instanceof WorkerBot) {\r\n\t\t\t\t\t\tsquare = undefined\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\tcase \"move\":\r\n\r\n\t\t}\r\n\t}\r\n\tgenerateCoin() {\r\n\t\tlet x = randInt(0, 99)\r\n\t\tlet y = randInt(0, 99)\r\n\t\tif (this.grid[y][x] === undefined) {\r\n\t\t\tthis.grid[y][x] = \"C\"\r\n\t\t} else {\r\n\t\t\tthis.generateCoin()\r\n\t\t}\r\n\t}\r\n\tgenerateWorkerBot(workerBotClass) {\r\n\t\tlet x = randInt(0, 99)\r\n\t\tlet y = randInt(0, 99)\r\n\t\tif (this.grid[y][x] === undefined) {\r\n\t\t\tlet bot = new workerBotClass(x, y);\r\n\t\t\tthis.grid[y][x] = bot;\r\n\t\t\treturn bot\r\n\t\t} else {\r\n\t\t\treturn this.generateWorkerBot()\r\n\t\t}\r\n\t}\r\n\tgetSurrondings(x, y) {\r\n\t\tlet surrondings = []\r\n\t\tfor (let i = -2; i <= 2; i++) {\r\n\t\t\tfor (let j = -2; j <= 2; j++) {\r\n\t\t\t\tsurrondings.push(this.grid[y + i][x + j])\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn surrondings\r\n\t}\r\n\tsurrondingsIndexToCoords(index, x, y) {//returns as x,y\r\n\t\treturn [index % 5 - 2 + x, Math.floor(index / 5) - 2 + y]\r\n\t}\r\n\tdisplay() {\r\n\t\tthis.displayFunc(this.grid)\r\n\t}\r\n}","import Controller from \"./Controller.js\"\r\nimport WorkerBot from \"./WorkerBot.js\"\r\nlet canvas=document.getElementById(\"grid\")\r\nconst CANVAS_SIZE=canvas.width;\r\nconst SQUARE_SIZE=CANVAS_SIZE/100;\r\nlet context=canvas.getContext(\"2d\");\r\nlet gridlines=true\r\nlet botClasses=[]\r\nlet controller=new Controller(botClasses,(grid)=>{\r\n\tconsole.log(grid)\r\n\tfor(let i=0;i<100;i++){\r\n\t\tfor(let j=0;j<100;j++){\r\n\t\t\tlet square= grid[i][j]\r\n\t\t\tlet dimensions=[i*SQUARE_SIZE,j*SQUARE_SIZE,SQUARE_SIZE,SQUARE_SIZE]\r\n\t\t\tif(square!==undefined){\r\n\t\t\t\tif(square===\"C\"){//coin\r\n\t\t\t\t\tcontext.fillstyle=\"rgb(255,255,0)\"\r\n\t\t\t\t}else if(square instanceof WorkerBot){\r\n\t\t\t\t\tcontext.fillstyle=square.color\r\n\t\t\t\t}\r\n\t\t\t\tcontext.fillRect(...dimensions)\r\n\t\t\t}else if(gridlines){\r\n\t\t\t\tcontext.lineWidth=0.3\r\n\t\t\t\tcontext.strokestyle=\"rgb(20,20,20)\";\r\n\t\t\t\tcontext.strokeRect(...dimensions)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})\r\ncontroller.runGame()"],"names":["randInt","min","max","Math","floor","random","shuffle","array","i","length","j","temp","WorkerBot","x","y","initialize","storageSize","storage","color","surrondings","message","ControllerBot","locations","messages","index","STARTING_COINS","COINS_PER_ROUND","NUM_WORKER_BOTS","Controller","botClasses","displayFunc","filter","botClasses2","controllerBot","prototype","workerBot","initGrid","botnets","slice","runRound","round","console","log","generateCoin","workerBots","flatMap","botnet","allMessages","map","workerBot2","sendMessage","getSurrondings","controllerBotMessage","action","performAction","handleAction","grid","Array","push","generateWorkerBot","bot","includes","coords","surrondingsIndexToCoords","square","undefined","workerBotClass","canvas","document","getElementById","CANVAS_SIZE","width","SQUARE_SIZE","context","getContext","controller","dimensions","fillstyle","fillRect","lineWidth","strokestyle","strokeRect","runGame"],"mappings":"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"}