{"version":3,"file":"worker.js","sources":["../../src/scripts/utils.js","../../src/scripts/WorkerBotWrapper.js","../../src/scripts/WorkerBot.js","../../src/scripts/ControllerBot.js","../../src/scripts/Controller.js","../../src/scripts/worker.js"],"sourcesContent":["//from https://stackoverflow.com/a/1527820/\r\nlet randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\r\n//from https://stackoverflow.com/a/12646864/7941251\r\nfunction shuffle(array) {\r\n\t//in place\r\n\tarray;\r\n\tfor (var i = array.length - 1; i > 0; i--) {\r\n\t\tvar j = Math.floor(Math.random() * (i + 1));\r\n\t\tvar temp = array[i];\r\n\t\tarray[i] = array[j];\r\n\t\tarray[j] = temp;\r\n\t}\r\n}\r\n//adapted from https://davidwalsh.name/essential-javascript-functions\r\nfunction debounce(func, wait, immediate) {\r\n\tlet timeout;\r\n\treturn function() {\r\n\t\tlet context = this,\r\n\t\t\targs = arguments;\r\n\t\tlet later = function() {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) {\r\n\t\t\t\tfunc.apply(context, args);\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) {\r\n\t\t\tfunc.apply(context, args);\r\n\t\t}\r\n\t};\r\n}\r\nexport { randInt, shuffle, debounce };\r\n","/*eslint no-unused-vars:0*/\r\nexport default class WorkerBotWrapper {\r\n\tconstructor(x, y, index, name, botClass) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.gold = 0;\r\n\t\tthis.bot = new botClass(x, y, index);\r\n\t\tthis.name = `${name}#${index}`;\r\n\t\tthis.stunnedRound = -1;\r\n\t}\r\n\tperformAction(message) {\r\n\t\treturn this.bot.performAction(message);\r\n\t}\r\n\tsendMessage(surrondings) {\r\n\t\treturn this.bot.sendMessage(surrondings);\r\n\t}\r\n}\r\n","import WorkerBotWrapper from \"./WorkerBotWrapper.js\";\r\n\r\n/*eslint no-unused-vars:0*/\r\nclass WorkerBot {\r\n\tconstructor(index) {\r\n\t\tthis.index = index;\r\n\t\tthis.color = \"\";\r\n\t}\r\n\tperformAction(message) {}\r\n\tsendMessage(x, y, surrondings) {}\r\n}\r\n/*let oldHasInstance = WorkerBot[Symbol.hasInstance].bind({});\r\nObject.defineProperty(WorkerBot, Symbol.hasInstance, {\r\n\tvalue: function(instance) {\r\n\t\treturn instance instanceof WorkerBotWrapper || oldHasInstance;\r\n\t}\r\n});*/\r\nexport default WorkerBot;\r\n","/*eslint no-unused-vars:0*/\r\nexport default class ControllerBot {\r\n\tconstructor(locations) {\r\n\t\tthis.storage = \"\";\r\n\t}\r\n\tsendMessage(messages, index) {\r\n\t\treturn [];\r\n\t}\r\n}\r\n","import { randInt, shuffle } from \"./utils.js\";\r\nimport WorkerBot from \"./WorkerBot.js\";\r\nimport ControllerBot from \"./ControllerBot.js\";\r\nimport WorkerBotWrapper from \"./WorkerBotWrapper.js\";\r\nconst STARTING_COINS = 100;\r\nconst COINS_PER_ROUND = 10;\r\nconst NUM_WORKER_BOTS = 20;\r\nexport default class Controller {\r\n\tconstructor(botClasses, displayFunc) {\r\n\t\tthis.displayFunc = displayFunc;\r\n\t\tthis.botClasses = botClasses.filter(\r\n\t\t\tbotClasses2 =>\r\n\t\t\t\tbotClasses2.controllerBot.prototype instanceof ControllerBot &&\r\n\t\t\t\tbotClasses2.workerBot.prototype instanceof WorkerBot\r\n\t\t);\r\n\t}\r\n\trunGame() {\r\n\t\tthis.initGrid();\r\n\t\tconsole.log(this.grid);\r\n\t\tshuffle(this.botnets);\r\n\t\tthis.botnets = this.botnets.slice(0, 15);\r\n\t\tfor (let i = 0; i < 1000; i++) {\r\n\t\t\tthis.runRound(i);\r\n\t\t}\r\n\t\treturn this.botnets\r\n\t\t\t.sort((a, b) => a.gold - b.gold)\r\n\t\t\t.map(\r\n\t\t\t\t(botnet, i) =>\r\n\t\t\t\t\t`${i + 1}. ${botnet.name}:${botnet.workerBots.reduce(\r\n\t\t\t\t\t\t(a, b) => a.gold + b.gold,\r\n\t\t\t\t\t\t0\r\n\t\t\t\t\t)} Gold`\r\n\t\t\t)\r\n\t\t\t.join(\"\\n\");\r\n\t}\r\n\trunRound(round) {\r\n\t\tconsole.log(round);\r\n\t\tfor (let i = 0; i < COINS_PER_ROUND; i++) {\r\n\t\t\tthis.generateCoin();\r\n\t\t}\r\n\t\tshuffle(this.botnets);\r\n\t\tlet workerBots = this.botnets.flatMap(botnet => botnet.workerBots);\r\n\t\tfor (let botnet of this.botnets) {\r\n\t\t\tfor (let i = 0; i < botnet.workerBots.length; i++) {\r\n\t\t\t\tlet workerBot = botnet.workerBots[i];\r\n\t\t\t\tif (\r\n\t\t\t\t\tworkerBot.stunnedRound !== -1 ||\r\n\t\t\t\t\tworkerBot.stunnedRound === round - 1\r\n\t\t\t\t) {\r\n\t\t\t\t\tworkerBot.stunnedRound = -1;\r\n\t\t\t\t\tlet allMessages = workerBots.map(workerBot2 =>\r\n\t\t\t\t\t\tworkerBot2.sendMessage(\r\n\t\t\t\t\t\t\tworkerBot2.x,\r\n\t\t\t\t\t\t\tworkerBot2.y,\r\n\t\t\t\t\t\t\tthis.getSurrondings(workerBot2.x, workerBot2.y)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet controllerBotMessage = botnet.controllerBot.sendMessage(\r\n\t\t\t\t\t\tallMessages,\r\n\t\t\t\t\t\ti\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet action = workerBot.performAction(controllerBotMessage);\r\n\t\t\t\t\tif (!this.handleAction(action, workerBot)) {\r\n\t\t\t\t\t\tconsole.log(`Invalid Action(${action})`);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//emp'd\r\n\t\t\t\t\tconsole.log(\"EMP'd\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.display();\r\n\t}\r\n\tinitGrid() {\r\n\t\tthis.grid = new Array(100); //indexed [y,x]\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tthis.grid[i] = new Array(100).fill(undefined);\r\n\t\t}\r\n\t\tthis.botnets = this.botClasses.map(botClasses2 => {\r\n\t\t\tlet workerBots = [];\r\n\t\t\tfor (let i = 0; i < NUM_WORKER_BOTS; i++) {\r\n\t\t\t\tworkerBots.push(\r\n\t\t\t\t\tthis.generateWorkerBot(\r\n\t\t\t\t\t\ti,\r\n\t\t\t\t\t\tbotClasses2.name,\r\n\t\t\t\t\t\tbotClasses2.workerBot\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tlet controllerBot = new botClasses2.controllerBot(\r\n\t\t\t\tworkerBots.map(bot => [bot.x, bot.y])\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\tname: botClasses2.name,\r\n\t\t\t\tcontrollerBot,\r\n\t\t\t\tworkerBots\r\n\t\t\t};\r\n\t\t});\r\n\t\tfor (let i = 0; i < STARTING_COINS; i++) {\r\n\t\t\tthis.generateCoin();\r\n\t\t}\r\n\t}\r\n\thandleAction(action, bot) {\r\n\t\t//returns true if action was valid\r\n\t\tswitch (action[0]) {\r\n\t\t\tcase \"kill\":\r\n\t\t\t\tif ([6, 7, 8, 11, 12, 13, 16, 17, 18].includes(action[1])) {\r\n\t\t\t\t\t//is valid attack spot\r\n\t\t\t\t\tlet coords = this.surrondingsIndexToCoords(action[1]);\r\n\t\t\t\t\tlet square = this.grid[coords[1]][coords[0]];\r\n\t\t\t\t\tif (square instanceof WorkerBotWrapper) {\r\n\t\t\t\t\t\tlet gold = Math.floor(square.gold);\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t`${bot.name} killed ${square.name} for ${gold} gold`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbot.gold += gold;\r\n\t\t\t\t\t\tsquare = undefined;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\tcase \"move\":\r\n\t\t\t\tif (action[1] >= 0 && action[1] <= 24) {\r\n\t\t\t\t\tlet coords = this.surrondingsIndexToCoords(action[1]);\r\n\t\t\t\t\tlet square = this.grid[coords[1]][coords[0]];\r\n\t\t\t\t\tif (square === undefined) {\r\n\t\t\t\t\t\tthis.grid[bot.y][bot.x] = undefined;\r\n\t\t\t\t\t\tsquare = bot;\r\n\t\t\t\t\t\t[bot.x, bot.y] = coords;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\tcase \"emp\":\r\n\t\t\t\tthrow new TypeError(\"emp not implemented\");\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(`${bot.name} skipped its turn`);\r\n\t\t}\r\n\t}\r\n\tgenerateCoin() {\r\n\t\tlet x = randInt(0, 99);\r\n\t\tlet y = randInt(0, 99);\r\n\t\tif (this.grid[y][x] === undefined) {\r\n\t\t\tthis.grid[y][x] = \"C\";\r\n\t\t} else {\r\n\t\t\tthis.generateCoin();\r\n\t\t}\r\n\t}\r\n\tgenerateWorkerBot(index, name, workerBotClass) {\r\n\t\tlet x = randInt(0, 99);\r\n\t\tlet y = randInt(0, 99);\r\n\t\tif (this.grid[y][x] === undefined) {\r\n\t\t\tlet bot = new WorkerBotWrapper(x, y, index, name, workerBotClass);\r\n\t\t\tthis.grid[y][x] = bot;\r\n\t\t\treturn bot;\r\n\t\t} else {\r\n\t\t\treturn this.generateWorkerBot(index, name, workerBotClass);\r\n\t\t}\r\n\t}\r\n\tgetSurrondings(x, y) {\r\n\t\tlet surrondings = [];\r\n\t\tfor (let i = -2; i <= 2; i++) {\r\n\t\t\tfor (let j = -2; j <= 2; j++) {\r\n\t\t\t\tsurrondings.push(this.grid[y + i][x + j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn surrondings.map(square =>\r\n\t\t\tsquare instanceof WorkerBotWrapper ? \"B\" : square\r\n\t\t);\r\n\t}\r\n\tsurrondingsIndexToCoords(index, x, y) {\r\n\t\t//returns as x,y\r\n\t\treturn [(index % 5) - 2 + x, Math.floor(index / 5) - 2 + y];\r\n\t}\r\n\tdisplay() {\r\n\t\tthis.displayFunc(this.grid);\r\n\t}\r\n}\r\n","import Controller from \"./Controller.js\";\r\nlet eval2 = eval;\r\nonmessage = function(event) {\r\n\tconsole.log(event);\r\n\tlet botClasses = event.data.map(func => eval2(`(${func})()`));\r\n\tlet controller = new Controller(botClasses, postMessage);\r\n\tcontroller.runGame();\r\n};\r\n"],"names":["randInt","min","max","Math","floor","random","shuffle","array","i","length","j","temp","WorkerBotWrapper","constructor","x","y","index","name","botClass","gold","bot","stunnedRound","performAction","message","sendMessage","surrondings","WorkerBot","color","ControllerBot","locations","storage","messages","STARTING_COINS","COINS_PER_ROUND","NUM_WORKER_BOTS","Controller","botClasses","displayFunc","filter","botClasses2","controllerBot","prototype","workerBot","runGame","initGrid","console","log","grid","botnets","slice","runRound","sort","a","b","map","botnet","workerBots","reduce","join","round","generateCoin","flatMap","allMessages","workerBot2","getSurrondings","controllerBotMessage","action","handleAction","display","Array","fill","undefined","push","generateWorkerBot","includes","coords","surrondingsIndexToCoords","square","TypeError","workerBotClass","eval2","eval","onmessage","event","data","func","controller","postMessage"],"mappings":"AAAA;AACA,IAAIA,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAcC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAN,GAAY,CAA7B,CAAX,IAA8CA,GAA1E;;;AAEA,SAASK,OAAT,CAAiBC,KAAjB,EAAwB;AACvB;OAEK,IAAIC,CAAC,GAAGD,KAAK,CAACE,MAAN,GAAe,CAA5B,EAA+BD,CAAC,GAAG,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;QACtCE,CAAC,GAAGP,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBG,CAAC,GAAG,CAArB,CAAX,CAAR;QACIG,IAAI,GAAGJ,KAAK,CAACC,CAAD,CAAhB;IACAD,KAAK,CAACC,CAAD,CAAL,GAAWD,KAAK,CAACG,CAAD,CAAhB;IACAH,KAAK,CAACG,CAAD,CAAL,GAAWC,IAAX;;;;ACVF;AACA,AAAe,MAAMC,gBAAN,CAAuB;EACrCC,WAAW,CAACC,CAAD,EAAIC,CAAJ,EAAOC,KAAP,EAAcC,IAAd,EAAoBC,QAApB,EAA8B;SACnCJ,CAAL,GAASA,CAAT;SACKC,CAAL,GAASA,CAAT;SACKI,IAAL,GAAY,CAAZ;SACKC,GAAL,GAAW,IAAIF,QAAJ,CAAaJ,CAAb,EAAgBC,CAAhB,EAAmBC,KAAnB,CAAX;SACKC,IAAL,aAAeA,IAAf,cAAuBD,KAAvB;SACKK,YAAL,GAAoB,CAAC,CAArB;;;EAEDC,aAAa,CAACC,OAAD,EAAU;WACf,KAAKH,GAAL,CAASE,aAAT,CAAuBC,OAAvB,CAAP;;;EAEDC,WAAW,CAACC,WAAD,EAAc;WACjB,KAAKL,GAAL,CAASI,WAAT,CAAqBC,WAArB,CAAP;;;;;ACZF;;AACA,MAAMC,SAAN,CAAgB;EACfb,WAAW,CAACG,KAAD,EAAQ;SACbA,KAAL,GAAaA,KAAb;SACKW,KAAL,GAAa,EAAb;;;EAEDL,aAAa,CAACC,OAAD,EAAU;;EACvBC,WAAW,CAACV,CAAD,EAAIC,CAAJ,EAAOU,WAAP,EAAoB;;;;ACThC;AACA,AAAe,MAAMG,aAAN,CAAoB;EAClCf,WAAW,CAACgB,SAAD,EAAY;SACjBC,OAAL,GAAe,EAAf;;;EAEDN,WAAW,CAACO,QAAD,EAAWf,KAAX,EAAkB;WACrB,EAAP;;;;;ACFF,MAAMgB,cAAc,GAAG,GAAvB;AACA,MAAMC,eAAe,GAAG,EAAxB;AACA,MAAMC,eAAe,GAAG,EAAxB;AACA,AAAe,MAAMC,UAAN,CAAiB;EAC/BtB,WAAW,CAACuB,UAAD,EAAaC,WAAb,EAA0B;SAC/BA,WAAL,GAAmBA,WAAnB;SACKD,UAAL,GAAkBA,UAAU,CAACE,MAAX,CACjBC,WAAW,IACVA,WAAW,CAACC,aAAZ,CAA0BC,SAA1B,YAA+Cb,aAA/C,IACAW,WAAW,CAACG,SAAZ,CAAsBD,SAAtB,YAA2Cf,SAH3B,CAAlB;;;EAMDiB,OAAO,GAAG;SACJC,QAAL;IACAC,OAAO,CAACC,GAAR,CAAY,KAAKC,IAAjB;IACAzC,OAAO,CAAC,KAAK0C,OAAN,CAAP;SACKA,OAAL,GAAe,KAAKA,OAAL,CAAaC,KAAb,CAAmB,CAAnB,EAAsB,EAAtB,CAAf;;SACK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,IAApB,EAA0BA,CAAC,EAA3B,EAA+B;WACzB0C,QAAL,CAAc1C,CAAd;;;WAEM,KAAKwC,OAAL,CACLG,IADK,CACA,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACjC,IAAF,GAASkC,CAAC,CAAClC,IADrB,EAELmC,GAFK,CAGL,CAACC,MAAD,EAAS/C,CAAT,eACIA,CAAC,GAAG,CADR,eACc+C,MAAM,CAACtC,IADrB,cAC6BsC,MAAM,CAACC,UAAP,CAAkBC,MAAlB,CAC3B,CAACL,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACjC,IAAF,GAASkC,CAAC,CAAClC,IADM,EAE3B,CAF2B,CAD7B,UAHK,EASLuC,IATK,CASA,IATA,CAAP;;;EAWDR,QAAQ,CAACS,KAAD,EAAQ;IACfd,OAAO,CAACC,GAAR,CAAYa,KAAZ;;SACK,IAAInD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyB,eAApB,EAAqCzB,CAAC,EAAtC,EAA0C;WACpCoD,YAAL;;;IAEDtD,OAAO,CAAC,KAAK0C,OAAN,CAAP;QACIQ,UAAU,GAAG,KAAKR,OAAL,CAAaa,OAAb,CAAqBN,MAAM,IAAIA,MAAM,CAACC,UAAtC,CAAjB;;SACK,IAAID,MAAT,IAAmB,KAAKP,OAAxB,EAAiC;WAC3B,IAAIxC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,MAAM,CAACC,UAAP,CAAkB/C,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;YAC9CkC,SAAS,GAAGa,MAAM,CAACC,UAAP,CAAkBhD,CAAlB,CAAhB;;YAECkC,SAAS,CAACrB,YAAV,KAA2B,CAAC,CAA5B,IACAqB,SAAS,CAACrB,YAAV,KAA2BsC,KAAK,GAAG,CAFpC,EAGE;UACDjB,SAAS,CAACrB,YAAV,GAAyB,CAAC,CAA1B;cACIyC,WAAW,GAAGN,UAAU,CAACF,GAAX,CAAeS,UAAU,IAC1CA,UAAU,CAACvC,WAAX,CACCuC,UAAU,CAACjD,CADZ,EAECiD,UAAU,CAAChD,CAFZ,EAGC,KAAKiD,cAAL,CAAoBD,UAAU,CAACjD,CAA/B,EAAkCiD,UAAU,CAAChD,CAA7C,CAHD,CADiB,CAAlB;cAOIkD,oBAAoB,GAAGV,MAAM,CAACf,aAAP,CAAqBhB,WAArB,CAC1BsC,WAD0B,EAE1BtD,CAF0B,CAA3B;cAII0D,MAAM,GAAGxB,SAAS,CAACpB,aAAV,CAAwB2C,oBAAxB,CAAb;;cACI,CAAC,KAAKE,YAAL,CAAkBD,MAAlB,EAA0BxB,SAA1B,CAAL,EAA2C;YAC1CG,OAAO,CAACC,GAAR,0BAA8BoB,MAA9B;;SAlBF,MAoBO;;UAENrB,OAAO,CAACC,GAAR,CAAY,OAAZ;;;;;SAIEsB,OAAL;;;EAEDxB,QAAQ,GAAG;SACLG,IAAL,GAAY,IAAIsB,KAAJ,CAAU,GAAV,CAAZ,CADU;;SAEL,IAAI7D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;WACxBuC,IAAL,CAAUvC,CAAV,IAAe,IAAI6D,KAAJ,CAAU,GAAV,EAAeC,IAAf,CAAoBC,SAApB,CAAf;;;SAEIvB,OAAL,GAAe,KAAKZ,UAAL,CAAgBkB,GAAhB,CAAoBf,WAAW,IAAI;UAC7CiB,UAAU,GAAG,EAAjB;;WACK,IAAIhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0B,eAApB,EAAqC1B,CAAC,EAAtC,EAA0C;QACzCgD,UAAU,CAACgB,IAAX,CACC,KAAKC,iBAAL,CACCjE,CADD,EAEC+B,WAAW,CAACtB,IAFb,EAGCsB,WAAW,CAACG,SAHb,CADD;;;UAQGF,aAAa,GAAG,IAAID,WAAW,CAACC,aAAhB,CACnBgB,UAAU,CAACF,GAAX,CAAelC,GAAG,IAAI,CAACA,GAAG,CAACN,CAAL,EAAQM,GAAG,CAACL,CAAZ,CAAtB,CADmB,CAApB;aAGO;QACNE,IAAI,EAAEsB,WAAW,CAACtB,IADZ;QAENuB,aAFM;QAGNgB;OAHD;KAdc,CAAf;;SAoBK,IAAIhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,cAApB,EAAoCxB,CAAC,EAArC,EAAyC;WACnCoD,YAAL;;;;EAGFO,YAAY,CAACD,MAAD,EAAS9C,GAAT,EAAc;;YAEjB8C,MAAM,CAAC,CAAD,CAAd;WACM,MAAL;YACK,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,EAAV,EAAc,EAAd,EAAkB,EAAlB,EAAsB,EAAtB,EAA0B,EAA1B,EAA8B,EAA9B,EAAkCQ,QAAlC,CAA2CR,MAAM,CAAC,CAAD,CAAjD,CAAJ,EAA2D;;cAEtDS,MAAM,GAAG,KAAKC,wBAAL,CAA8BV,MAAM,CAAC,CAAD,CAApC,CAAb;cACIW,MAAM,GAAG,KAAK9B,IAAL,CAAU4B,MAAM,CAAC,CAAD,CAAhB,EAAqBA,MAAM,CAAC,CAAD,CAA3B,CAAb;;cACIE,MAAM,YAAYjE,gBAAtB,EAAwC;gBACnCO,IAAI,GAAGhB,IAAI,CAACC,KAAL,CAAWyE,MAAM,CAAC1D,IAAlB,CAAX;YACA0B,OAAO,CAACC,GAAR,WACI1B,GAAG,CAACH,IADR,qBACuB4D,MAAM,CAAC5D,IAD9B,kBAC0CE,IAD1C;YAGAC,GAAG,CAACD,IAAJ,IAAYA,IAAZ;YACA0D,MAAM,GAAGN,SAAT;mBACO,IAAP;WAPD,MAQO;mBACC,KAAP;;SAbF,MAeO;iBACC,KAAP;;;WAEG,MAAL;YACKL,MAAM,CAAC,CAAD,CAAN,IAAa,CAAb,IAAkBA,MAAM,CAAC,CAAD,CAAN,IAAa,EAAnC,EAAuC;cAClCS,MAAM,GAAG,KAAKC,wBAAL,CAA8BV,MAAM,CAAC,CAAD,CAApC,CAAb;cACIW,MAAM,GAAG,KAAK9B,IAAL,CAAU4B,MAAM,CAAC,CAAD,CAAhB,EAAqBA,MAAM,CAAC,CAAD,CAA3B,CAAb;;cACIE,MAAM,KAAKN,SAAf,EAA0B;iBACpBxB,IAAL,CAAU3B,GAAG,CAACL,CAAd,EAAiBK,GAAG,CAACN,CAArB,IAA0ByD,SAA1B;YACAM,MAAM,GAAGzD,GAAT;aACCA,GAAG,CAACN,CAAL,EAAQM,GAAG,CAACL,CAAZ,IAAiB4D,MAAjB;mBACO,IAAP;WAJD,MAKO;mBACC,KAAP;;SATF,MAWO;iBACC,KAAP;;;WAEG,KAAL;cACO,IAAIG,SAAJ,CAAc,qBAAd,CAAN;;;QAEAjC,OAAO,CAACC,GAAR,WAAe1B,GAAG,CAACH,IAAnB;;;;EAGH2C,YAAY,GAAG;QACV9C,CAAC,GAAGd,OAAO,CAAC,CAAD,EAAI,EAAJ,CAAf;QACIe,CAAC,GAAGf,OAAO,CAAC,CAAD,EAAI,EAAJ,CAAf;;QACI,KAAK+C,IAAL,CAAUhC,CAAV,EAAaD,CAAb,MAAoByD,SAAxB,EAAmC;WAC7BxB,IAAL,CAAUhC,CAAV,EAAaD,CAAb,IAAkB,GAAlB;KADD,MAEO;WACD8C,YAAL;;;;EAGFa,iBAAiB,CAACzD,KAAD,EAAQC,IAAR,EAAc8D,cAAd,EAA8B;QAC1CjE,CAAC,GAAGd,OAAO,CAAC,CAAD,EAAI,EAAJ,CAAf;QACIe,CAAC,GAAGf,OAAO,CAAC,CAAD,EAAI,EAAJ,CAAf;;QACI,KAAK+C,IAAL,CAAUhC,CAAV,EAAaD,CAAb,MAAoByD,SAAxB,EAAmC;UAC9BnD,GAAG,GAAG,IAAIR,gBAAJ,CAAqBE,CAArB,EAAwBC,CAAxB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC8D,cAAxC,CAAV;WACKhC,IAAL,CAAUhC,CAAV,EAAaD,CAAb,IAAkBM,GAAlB;aACOA,GAAP;KAHD,MAIO;aACC,KAAKqD,iBAAL,CAAuBzD,KAAvB,EAA8BC,IAA9B,EAAoC8D,cAApC,CAAP;;;;EAGFf,cAAc,CAAClD,CAAD,EAAIC,CAAJ,EAAO;QAChBU,WAAW,GAAG,EAAlB;;SACK,IAAIjB,CAAC,GAAG,CAAC,CAAd,EAAiBA,CAAC,IAAI,CAAtB,EAAyBA,CAAC,EAA1B,EAA8B;WACxB,IAAIE,CAAC,GAAG,CAAC,CAAd,EAAiBA,CAAC,IAAI,CAAtB,EAAyBA,CAAC,EAA1B,EAA8B;QAC7Be,WAAW,CAAC+C,IAAZ,CAAiB,KAAKzB,IAAL,CAAUhC,CAAC,GAAGP,CAAd,EAAiBM,CAAC,GAAGJ,CAArB,CAAjB;;;;WAGKe,WAAW,CAAC6B,GAAZ,CAAgBuB,MAAM,IAC5BA,MAAM,YAAYjE,gBAAlB,GAAqC,GAArC,GAA2CiE,MADrC,CAAP;;;EAIDD,wBAAwB,CAAC5D,KAAD,EAAQF,CAAR,EAAWC,CAAX,EAAc;;WAE9B,CAAEC,KAAK,GAAG,CAAT,GAAc,CAAd,GAAkBF,CAAnB,EAAsBX,IAAI,CAACC,KAAL,CAAWY,KAAK,GAAG,CAAnB,IAAwB,CAAxB,GAA4BD,CAAlD,CAAP;;;EAEDqD,OAAO,GAAG;SACJ/B,WAAL,CAAiB,KAAKU,IAAtB;;;;;ACpLF,IAAIiC,KAAK,GAAGC,IAAZ;;AACAC,SAAS,GAAG,mBAASC,KAAT,EAAgB;EAC3BtC,OAAO,CAACC,GAAR,CAAYqC,KAAZ;MACI/C,UAAU,GAAG+C,KAAK,CAACC,IAAN,CAAW9B,GAAX,CAAe+B,IAAI,IAAIL,KAAK,YAAKK,IAAL,SAA5B,CAAjB;MACIC,UAAU,GAAG,IAAInD,UAAJ,CAAeC,UAAf,EAA2BmD,WAA3B,CAAjB;EACAD,UAAU,CAAC3C,OAAX;CAJD"}